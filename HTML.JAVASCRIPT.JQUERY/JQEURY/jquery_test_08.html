<!-------------------------------------
jquery_test_08.html
---------------------------------------
	=>숫자만 입력받아 3자리마다 콤마를 제어 재입력하는 예제 -->
<html><meta charset="UTF-8">
<head>
	<script src = "jquery-3.6.0.min.js"></script>
	<script src = "common_func.js"></script>
	<script>
		//-------------------------------------------
		//$(document).ready(  function(){자스코딩}  );
		//-------------------------------------------
			// body 태그 안의 요소들을 읽어들인 후 익명함수 내부의 자스코딩을 실행.
		$(document).ready(function(){
			var money = $(".money");
			money.focus();
			money.keyup(function(event){
				var money = $(this).val();
				var num = "";
				// 입력받은 값중 숫자문자만 골라내서 num에 저장.
				for(var i=0; i < money.length; i++){
					var str = money.charAt(i);
					if(isNumber(str)){
						num += str;
					}
				}

				// num에서 길이가 2이상이고 첫글자가 0 으로 시작되면 0을 삭제. 0혼자만 있다면 삭제 X
				if(num.length>0){
					num = parseInt(num,10) + "";
				}else{
					return;
				}
				
				// while( num.length > 1 && num.indexOf("0")==0){
				// 	num = num.substring(1);
				// }

				// if(isValidPattern(/^[1-9]{1}([0-9]*)$/,num) == false && num.length > 1){
				// 	for (var i=0; i < num.length; i++) {
				// 		if(num[i] == 0){
				// 			num = num.substring(i+1);
				// 		} else {
				// 			break;
				// 		}
				// 	}
				// }

				//num 변수의 문자열을 하나하나 가져와서 3자리 마다 , 찍기. 
				var result = "";
				var cnt = 0;
				for(var i=num.length-1;i>=0;i--){
					cnt++;
					if(cnt % 3 == 0){
						result = ',' + num.charAt(i) + result;
						// if(num.length > cnt){
						// 	result = ',' + num.charAt(i) + result;
						// } else {
						// 	result= num.charAt(i) + result;
						// }
					} else {
						result = num.charAt(i) + result;
					}
				}
				// 3자리마다 ,찍으면 6자리 숫자일때 맨 앞이 ,이므로 첫글자가 ,라면 , 삭제
				if( result.indexOf(",")==0){
					result = result.substring(1);
				}
					$(this).val(result);
				

			})
		});
	</script>
</head>


<body><center>
	<input type="text" class="money" name="money" size=20 maxlength=13>원<br>
	<div class="msg"></div>
</body>
</html>
























